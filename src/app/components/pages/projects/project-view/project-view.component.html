<app-sub-toolbar
    [title]="this.Project.name"
    [backButton]="true"
    [addButton]="false"
>
</app-sub-toolbar>

<div>
    <mat-tab-group mat-stretch-tabs class="full-height">
        <mat-tab label="Infomación General">
            <div class="container pb-3 pt-3 border-box">
                <mat-card>
                    <mat-card-title class="font-weight-lighter">Generales</mat-card-title>
                    <mat-divider></mat-divider>
                    <div class="mt-3 mb-3 row">
                        <div class="col-sm-4">
                            <small class="d-block full-width">Nombre:</small>
                            <span class="font-weight-lighter">{{this.Project.name}}</span>
                        </div>
                        <div class="col-sm-4">
                            <small class="d-block full-width">Fecha de Inicio:</small>
                            <span class="font-weight-lighter">{{this.Project.start_date}}</span>
                        </div>
                        <div class="col-sm-4">
                            <small class="d-block full-width">Ubicación (cantón):</small>
                            <span class="font-weight-lighter">{{this.Project.ubication}}</span>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <div class="col-sm-4">
                            <small class="d-block full-width">Duración del Proyecto:</small>
                            <span class="font-weight-lighter">{{this.Project.duration}} meses</span>
                        </div>
                    </div>
                    <mat-divider></mat-divider>
                    <div class="pt-3">
                        <small class="d-block full-width">Objetivo General:</small>
                        <p class="font-weight-lighter">{{this.Project.gen_objective}}</p>
                    </div>
                    <div class="mt-3 mb-3" *ngFor="let objetive of this.Project.esp_objectives; let i = index">
                        <small class="d-block full-width">Objetivo Específico {{i+1}}:</small>
                        <span class="font-weight-lighter">{{objetive}}</span>
                    </div>
                    <mat-divider></mat-divider>
                    <div class="pt-3">
                        <div class="mb-3" *ngFor="let result of this.Project.results; let i = index">
                            <small class="d-block full-width">Resultado {{i+1}}:</small>
                            <p class="font-weight-lighter">{{result}}</p>
                        </div>
                    </div>
                    <mat-divider></mat-divider>
                    <div class="row pt-3">
                        <div class="col-sm-6">
                            <small class="d-block full-width">Número de Beneficiarios:</small>
                            <span class="font-weight-lighter">{{this.Project.beneficiaries.number}}</span>
                        </div>
                        <div class="col-sm-6">
                            <small class="d-block full-width">Listado de Beneficiarios:</small>
                            <a [href]="'http://localhost:3000/'+ this.File.file" [download]="this.File.name+this.File.ext" mat-raised-button color="primary" class="font-weight-lighter">DESCARGAR</a>
                        </div>
                    </div>
                </mat-card>
            </div>
        </mat-tab>
        <mat-tab label="Presupuesto">
            <div class="container pb-3 border-box pt-3 ">
                <mat-card>
                    <mat-card-title class="font-weight-lighter">Presupuesto</mat-card-title>
                    <mat-divider></mat-divider>
                    <div class="mt-3 mb-3 row">
                        <div class="col-sm-4">
                            <small class="d-block full-width">Presupuesto Total Inicial:</small>
                            <span class="font-weight-lighter">{{this.Project.budgets.total_inicial | currency}}</span>
                        </div>
                        <div class="col-sm-4">
                            <small class="d-block full-width">Presupuesto Total Final:</small>
                            <span class="font-weight-lighter">{{this.Project.budgets.total_final | currency}}</span>
                        </div>
                        <div class="col-sm-4">
                            <small class="d-block full-width">Presupuesto Ejecutado:</small>
                            <span class="font-weight-lighter">{{this.executed_budget | currency}}</span>
                        </div>
                    </div>
                    <div class="mt-3 flex">
                        <div class="fill-remaining-space"></div>
                        <button mat-raised-button color="primary" class="font-weight-lighter mr-2">Registrar cambio en presupuesto</button>
                        <button mat-raised-button color="primary" class="font-weight-lighter" (click)="this.updateExecuted()">Actualizar presupuesto ejecutado</button>
                    </div>
                </mat-card>
                <mat-card class="mt-4">
                    <mat-card-title class="font-weight-lighter text-center">Progreso</mat-card-title>
                
                    <div id="graphic">
                        <div class="flex justify-content-center">
                            <ngx-charts-line-chart *ngIf="this.multi"
                                [view]="view"
                                [scheme]="colorScheme"
                                [legend]="legend"
                                [showXAxisLabel]="showXAxisLabel"
                                [showYAxisLabel]="showYAxisLabel"
                                [xAxis]="xAxis"
                                [yAxis]="yAxis"
                                [xAxisLabel]="xAxisLabel"
                                [yAxisLabel]="yAxisLabel"
                                [timeline]="timeline"
                                [results]="multi"
                                (select)="onSelect($event)"
                                (activate)="onActivate($event)"
                                (deactivate)="onDeactivate($event)">
                            </ngx-charts-line-chart>
                        </div>
                    </div>

                </mat-card>
            </div>
        </mat-tab>
        <mat-tab label="Organizaciones">
            fsdfsf
        </mat-tab>
        <mat-tab label="Financiadores">
            fsdfsf
        </mat-tab>
    </mat-tab-group>
</div>