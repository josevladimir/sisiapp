<app-sub-toolbar *ngIf="this.isAdmin | async"
    [title]="this.Project.name"
    [backButton]="true"
    [deleteButton]="this.DeleteBtn"
    [editButton]="!(isEditMode | async)"
    [addButton]="false">
</app-sub-toolbar>

<app-sub-toolbar *ngIf="!(this.isAdmin | async)"
    [title]="this.Project.name"
    [backButton]="true"
    [addButton]="false">
</app-sub-toolbar>

<div class="page-content-without-padding">
    <mat-tab-group mat-stretch-tabs class="full-height"> 
        <mat-tab label="Infomación General">
            <div class="container pb-4 pt-3 border-box" *ngIf="!(this.isEditMode | async);else Editmode">
                <mat-card class="mb-4">
                    <mat-card-title class="font-weight-lighter">Generales</mat-card-title>
                    <mat-divider></mat-divider>
                    <div class="mt-3 mb-3 row">
                        <div class="col-sm-4">
                            <small class="d-block full-width">Nombre:</small>
                            <span class="font-weight-lighter">{{this.Project.name}}</span>
                        </div>
                        <div class="col-sm-4">
                            <small class="d-block full-width">Fecha de Inicio:</small>
                            <span class="font-weight-lighter">{{this.Project.start_date | date : 'd/M/yyyy'}}</span>
                        </div>
                        <div class="col-sm-4">
                            <small class="d-block full-width">Ubicación (cantón):</small>
                            <span class="font-weight-lighter">{{this.Project.ubication}}</span>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <div class="col-sm-4">
                            <small class="d-block full-width">Duración del Proyecto:</small>
                            <span class="font-weight-lighter">{{this.Project.duration}} meses</span>
                        </div>
                    </div>
                    <mat-divider></mat-divider>
                    <div class="pt-3">
                        <small class="d-block full-width">Objetivo General:</small>
                        <p class="font-weight-lighter">{{this.Project.gen_objective}}</p>
                    </div>
                    <div class="mt-3 mb-3" *ngFor="let objetive of this.Project.esp_objectives; let i = index">
                        <small class="d-block full-width">Objetivo Específico {{i+1}}:</small>
                        <span class="font-weight-lighter">{{objetive}}</span>
                    </div>
                    <mat-divider></mat-divider>
                    <div class="pt-3">
                        <div class="mb-3" *ngFor="let result of this.Project.results; let i = index">
                            <small class="d-block full-width">Resultado {{i+1}}:</small>
                            <p class="font-weight-lighter">{{result}}</p>
                        </div>
                    </div>
                    <mat-divider></mat-divider>
                    <div class="row pt-3 mb-4">
                        <div class="col-sm-4">
                            <small class="d-block full-width">Número de Beneficiarios:</small>
                            <span class="font-weight-lighter">{{this.Project.beneficiaries.number}}</span>
                        </div>
                        <div class="col-sm-4">
                            <small class="d-block full-width">Listado de Beneficiarios:</small>
                            <div class="flex pt-1" *ngIf="this.File == undefined; else IfThereFile">
                                <img class="rotar mr-2" src="{{this.assetsUrl}}/images/logo-sisi-only.svg" width="25px">
                                <small class="font-weight-lighter">Cargando...</small>
                            </div>
                            <ng-template #IfThereFile>
                                <a [href]="this.URL + '/' + this.File.file" target="blank" [download]="this.File.name+this.File.ext" mat-raised-button color="primary" class="font-weight-lighter">DESCARGAR</a>
                            </ng-template>
                        </div>
                        <div class="col-sm-4">
                            <small>Descargar Información del Proyecto:</small>
                            <!--a [href]="this.URL +'/' +  this.Project.informPDF.url" target="blank" [download]="this.Project.informPDF.name+this.File.ext" mat-raised-button color="primary" class="font-weight-lighter">DESCARGAR</a-->
                        </div>
                    </div>
                </mat-card>
            </div>
            <!--Formulario de Edición-->
            <ng-template #Editmode>
                <form [formGroup]="GeneralFormGroup" class="p-3" (ngSubmit)="updateProject()">
                    <mat-card>
                        <mat-card-title class="font-weight-lighter">Datos Generales</mat-card-title> 
                        <div class="row pb-1">
                            <div class="col-sm-4">
                                <mat-form-field class="full-width">
                                    <input matInput type="text" formControlName="name" placeholder="Nombre del Proyecto">
                                    <mat-error *ngIf="this.GeneralFormGroup.get('name').errors?.required">Este campo es obligatorio</mat-error>
                                    <mat-error *ngIf="this.GeneralFormGroup.get('name').errors?.exist">Ya existe un proyecto con ese nombre</mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-4">
                                <mat-form-field class="full-width">
                                    <mat-label>Fecha de Inicio</mat-label>
                                    <input matInput [matDatepicker]="picker" formControlName="start_date">
                                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                    <mat-datepicker #picker></mat-datepicker>
                                    <mat-hint>Ingrese la fecha en formato: <b>01/01/2019</b></mat-hint>
                                    <mat-error *ngIf="this.GeneralFormGroup.get('start_date').errors?.required">Este campo es obligatorio</mat-error>
                                    <mat-error *ngIf="!this.GeneralFormGroup.get('start_date').errors?.required && this.GeneralFormGroup.get('start_date').errors?.pattern">Ingrese una fecha válida</mat-error>
                                  </mat-form-field>
                                  
                            </div>
                            <div class="col-sm-4">
                                <mat-form-field class="full-width">
                                    <input matInput type="number" formControlName="duration" placeholder="Duración">
                                    <mat-hint>Ingrese la duración del proyecto en meses.</mat-hint>
                                    <mat-error *ngIf="this.GeneralFormGroup.get('duration').errors?.required">Este campo es obligatorio.</mat-error>
                                    <mat-error *ngIf="this.GeneralFormGroup.get('duration').errors?.pattern">Debe ingresar una cantidad numérica.</mat-error>
                                    <mat-error *ngIf="this.GeneralFormGroup.get('duration').errors?.isInvalid">Debe ingresar una cantidad válida.</mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                    </mat-card>                    
                    
                    <mat-card class="mt-4">
                        <mat-card-title class="font-weight-lighter">Localidad y Beneficiarios</mat-card-title>
                        <div class="row">
                            <div class="col-sm-4">
                                <mat-form-field class="full-width">
                                    <input matInput type="text" formControlName="ubication" placeholder="Ubicación (Cantón)">
                                    <mat-error *ngIf="this.GeneralFormGroup.get('ubication').errors?.required">Este campo es obligatorio.</mat-error>
                                    <mat-error *ngIf="!this.GeneralFormGroup.get('ubication').errors?.required && this.GeneralFormGroup.get('ubication').errors?.isBlank">Este campo no puede quedar en blanco.</mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-4">
                                <div formGroupName="beneficiaries">
                                    <mat-form-field class="full-width">
                                        <input matInput type="number" formControlName="number" placeholder="Número de Beneficiarios">
                                        <mat-error *ngIf="this.GeneralFormGroup.get('beneficiaries').get('number').errors?.required">Este campo es obligatorio.</mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                    </mat-card>
                    
                    <mat-card class="mt-4 mb-4">
                        <mat-card-title class="font-weight-lighter">Objetivos y Resultados</mat-card-title>
                        <div class="row">
                            <div class="col-sm-12">
                                <mat-form-field class="full-width">
                                    <textarea matInput type="text" formControlName="gen_objective" placeholder="Objetivo General"></textarea>
                                    <mat-error *ngIf="this.GeneralFormGroup.get('gen_objective').errors?.required">El Objetivo General es obligatorio.</mat-error>
                                    <mat-error *ngIf="!this.GeneralFormGroup.get('gen_objective').errors?.required && this.GeneralFormGroup.get('gen_objective').errors?.isBlank">Este campo no puede quedar en blanco.</mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-6">
                                <mat-form-field class="full-width" formArrayName="esp_objectives" *ngFor="let objetivo of this.GeneralFormGroup.get('esp_objectives')['controls']; let i = index">
                                    <div *ngIf="i != 0" class="form-control-equis">
                                        <mat-icon (click)="this.deleteObjective(i)">clear</mat-icon>
                                    </div>
                                    <textarea matInput type="text" [formControlName]="i" placeholder="Objetivo Específico"></textarea>
                                    <mat-error *ngIf="this.GeneralFormGroup.get('esp_objectives')['controls'][i].errors?.required">Este campo es obligatorio.</mat-error>
                                    <mat-error *ngIf="!this.GeneralFormGroup.get('esp_objectives')['controls'][i].errors?.required && this.GeneralFormGroup.get('esp_objectives')['controls'][i].errors?.isBlank">Este campo no puede quedar en blanco.</mat-error>
                                </mat-form-field>
                                <div class="flex">
                                    <span class="fill-remaining-space"></span>
                                    <button mat-raised-button color="primary" type="button" (click)="this.addObjective()">Añadir Objetivo</button>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <mat-form-field class="full-width" formArrayName="results" *ngFor="let resultado of this.GeneralFormGroup.get('results')['controls']; let i = index">
                                    <div *ngIf="i != 0" class="form-control-equis">
                                        <mat-icon (click)="this.deleteResult(i)">clear</mat-icon>
                                    </div>
                                    <textarea matInput type="text" [formControlName]="i" placeholder="Resultado"></textarea>
                                    <mat-error *ngIf="this.GeneralFormGroup.get('results')['controls'][i].errors?.required">Este campo es obligatorio.</mat-error>
                                    <mat-error *ngIf="!this.GeneralFormGroup.get('results')['controls'][i].errors?.required && this.GeneralFormGroup.get('results')['controls'][i].errors?.isBlank">Este campo no puede quedar en blanco.</mat-error>
                                </mat-form-field>
                                <div class="flex">
                                    <span class="fill-remaining-space"></span>
                                    <button mat-raised-button color="primary" type="button" (click)="this.addResult()">Añadir Resultado</button>
                                </div>
                            </div>
                        </div>
                    </mat-card>
                    <app-form-buttons [isEditMode]="true" [formGroup]="this.GeneralFormGroup"></app-form-buttons>
                </form>            
            </ng-template>
        </mat-tab>
        <!--Pestaña Presupuesto-->
        <mat-tab label="Presupuesto">
            <div class="container pb-3 border-box pt-3 ">
                <mat-card>
                    <mat-card-title class="font-weight-lighter">Presupuesto</mat-card-title>
                    <mat-divider></mat-divider>
                    <div class="mt-3 mb-3 row">
                        <div class="col-sm-4">
                            <small class="d-block full-width">Presupuesto Total Inicial:</small>
                            <span class="font-weight-lighter">{{this.Project.budgets.total_inicial | currency}}</span>
                        </div>
                        <div class="col-sm-4">
                            <small class="d-block full-width">Presupuesto Total Final:</small>
                            <span class="font-weight-lighter">{{this.Project.budgets.total_final | currency}}</span>
                        </div>
                        <div class="col-sm-4">
                            <small class="d-block full-width">Presupuesto Ejecutado:</small>
                            <span class="font-weight-lighter">{{this.executed_budget.value | currency}}</span>
                        </div>
                    </div>
                    <div class="mt-3 flex" *ngIf="this.isAdmin | async">
                        <div class="fill-remaining-space"></div>
                        <button mat-raised-button color="primary" class="font-weight-lighter mr-2" (click)="this.updateBudget()">Registrar cambio en presupuesto</button>
                        <button mat-raised-button color="primary" class="font-weight-lighter" (click)="this.updateExecuted()">Actualizar presupuesto ejecutado</button>
                    </div>
                </mat-card>
                <mat-card class="mt-4">
                    <mat-card-title class="font-weight-lighter text-center">Progreso</mat-card-title>
                
                    <div id="graphic">
                        <div class="flex justify-content-center">
                            <ngx-charts-line-chart *ngIf="this.multi"
                                [view]="view"
                                [scheme]="colorScheme"
                                [legend]="legend"
                                [showXAxisLabel]="showXAxisLabel"
                                [showYAxisLabel]="showYAxisLabel"
                                [xAxis]="xAxis"
                                [yAxis]="yAxis"
                                [xAxisLabel]="xAxisLabel"
                                [yAxisLabel]="yAxisLabel"
                                [timeline]="timeline"
                                [results]="multi"
                                (select)="onSelect($event)"
                                (activate)="onActivate($event)"
                                (deactivate)="onDeactivate($event)">
                            </ngx-charts-line-chart>
                        </div>
                    </div>

                </mat-card>
            </div>
        </mat-tab>
        <!--Pestaña Organizaciones-->
        <mat-tab label="Organizaciones">
            <div class="container pb-3 pt-3 border-box">
                <div class="row" *ngIf="this.Project.organizations.length; else NoOrganizations">
                    <div class="mb-4 col-sm-4" *ngFor="let organization of this.Project.organizations">
                        <app-organization-card [organization]="organization"></app-organization-card>
                    </div>
                </div>

                <ng-template #NoOrganizations>
                    <div class="full-height full-width flex justify-content-center align-items-center">
                        <div>
                            <h2 class="text-center font-weight-lighter">No hay Organizaciones vinculadas con este proyecto.</h2>
                        </div>
                    </div>
                </ng-template>
            </div>
        </mat-tab>
        <!--Pestaña Financiadores-->
        <mat-tab label="Financiadores" id="financiadores-box" class="full-height">
            <div class="container pb-3 pt-3 border-box full-height">
                <div class="row full-height" *ngIf="this.Project.funders.length; else NoFunders">
                    <div class="col-sm-12 full-height">
                        <mat-card class="full-height">
                            <div class="flex flex-align-vertical">
                                <mat-card-title class="font-weight-lighter">Financiadores Vinculados</mat-card-title>
                                <span class="fill-remaining-space"></span>
                                <button *ngIf="this.isAdmin | async" mat-raised-button color="primary" type="button" (click)="this.linkFunders()">Vincular Financiador</button>
                            </div>
                            <mat-divider></mat-divider>
                            <mat-card-content class="full-height">
                                <div class="pt-3 full-height">
                                    <mat-list class="scroll-list-view full-height bordered-list">
                                        <li *ngFor="let funder of this.Project.funders" class="full-width flex flex-align-vertical font-weight-lighter"><a routerLink="/main/funders/{{funder._id}}" class="ml-3">{{funder.name}} - {{funder.place}}</a><span class="fill-remaining-space"></span><button mat-icon-button matTooltip="Desvincular Financiador" (click)="delinkFunder(funder._id)"><mat-icon>close</mat-icon></button></li>
                                    </mat-list>
                                </div>
                            </mat-card-content>
                        </mat-card>
                    </div>
                </div>
                <ng-template #NoFunders>
                    <div class="row full-height">
                        <div class="col-sm-12">
                            <h3 class="full-width font-weight-lighter mt-5 text-center">No hay Financiadores Vinculados con este proyecto.</h3>
                            <div class="flex flex-center">
                                <button *ngIf="this.isAdmin | async" mat-raised-button color="primary" type="button" (click)="this.linkFunders()">Vincular Financiador</button>
                            </div>
                        </div>
                    </div>
                </ng-template>
            </div>
        </mat-tab>
        <!--Pestaña Esquema de Fichas-->
        <mat-tab label="Esquema de las Fichas" class="full-height">
            <form *ngIf="(this.isEditMode | async); else SchemaView" class="p-4" [formGroup]="this.SchemaFormGroup"> <!--Formulario de Esquema-->
        
                <mat-card>
                    <mat-card-title class="font-weight-lighter">Indicadores y Organizaciones</mat-card-title>
                    <div class="row mt-3">
                        <div class="col-sm-6">
                            <div>
                                <div class="project-list-title">
                                    Indicadores
                                </div>
                                <mat-selection-list class="projects-selection-list" #IndicatorsList>
                                    <mat-list-option class="font-weight-lighter" *ngFor="let indicator of this.Indicators" [selected]="this.isSelected(indicator._id,'Indicators')" [value]="indicator._id" (click)="OnIndicatorsListChange(indicator._id,IndicatorsList)">{{indicator.name}}</mat-list-option>  
                                </mat-selection-list>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div>
                                <div class="project-list-title">
                                    Organizaciones
                                </div>
                                <mat-selection-list class="projects-selection-list"  #OrganizationsList>
                                    <mat-list-option class="font-weight-lighter flex" *ngFor="let organization of this.Organizations" [selected]="this.isSelected(organization._id,'Organizations')" [value]="organization._id" (click)="OnOrganizationsListChange(organization._id,OrganizationsList)">
                                        {{organization.name}}
                                    </mat-list-option>
                                </mat-selection-list>
                            </div>
                        </div>
                    </div>
                </mat-card>

                <mat-card class="mt-4">
                    <mat-card-title class="font-weight-lighter">Línea Base y Metas</mat-card-title>
                    <mat-card-content>
                        <div *ngIf="!this.SchemaFormGroup.get('full_schema')['controls'].length" class="col-sm-12 mt-3 mb-3 font-weight-lighter text-center">No ha seleccionado ningún Indicador...</div>
                        <mat-tab-group *ngIf="this.SchemaFormGroup.get('full_schema')['controls'].length">
                            <mat-tab formArrayName="full_schema" [label]="indicadorGroup.get('indicator').value" *ngFor="let indicadorGroup of this.SchemaFormGroup.get('full_schema')['controls']; let i = index">
                                <div [formGroupName]="i" class="tab-content">
                                    <div class="row" formGroupName="baseline_diff" *ngIf="indicadorGroup.get('baseline')['controls'].length"> <!--Diferenciación en la Línea Base por grupo de organizaciones-->
                                        <div class="col-sm-6">
                                            <mat-form-field class="full-width">
                                                <mat-label>Ingresar Línea Base:</mat-label>
                                                <mat-select formControlName="type"><!--Agregar el remakeBaseline-->
                                                    <mat-option value="individual">Individual</mat-option>
                                                    <mat-option value="grupos">Por Grupos de Organizaciones</mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                        <div class="col-sm-6">
                                            <mat-form-field class="full-width" *ngIf="this.indicadorGroup.get('baseline_diff').get('type').value != 'individual'">
                                                <mat-label>Agrupar por:</mat-label>
                                                <mat-select formControlName="by"><!--Agregar el remakeBaseline-->
                                                    <mat-option value="sectors">Sector</mat-option>
                                                    <mat-option value="types">Tipo</mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <mat-divider *ngIf="indicadorGroup.get('baseline')['controls'].length"></mat-divider>
                                    <div class="pt-3 pb-3" *ngIf="indicadorGroup.get('baseline')['controls'].length">
                                        <h5 class="font-weight-lighter">Línea Base</h5>
                                        <div class="table-container">
                                            <table class="baseline-table">
                                                <thead>
                                                    <tr>
                                                        <th class="sticky main-row"></th>
                                                        <th class="main-row" *ngFor="let parameter of this.indicatorsSelected[i].parameters_schema">{{parameter.name}}</th>
                                                    </tr>
                                                </thead>
                                                <tbody formArrayName="baseline" *ngFor="let organizationGroup of indicadorGroup.get('baseline')['controls']; let j = index">
                                                    <tr [formGroupName]="j">
                                                        <td class="sticky main-col">{{organizationGroup.get('organization').value}}</td>
                                                        <td formArrayName="parameters" class="table-box main-col" *ngFor="let parameter of organizationGroup.get('parameters')['controls']; let k = index">
                                                            <div [formGroupName]="k">
                                                                <input type="text" class="full-width font-weight-lighter" formControlName="baseline" placeholder="Línea Base">
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <mat-divider></mat-divider>
                                    <div class="pt-3">
                                        <h5 class="font-weight-lighter">Metas</h5>
                                        <div class="table-container">
                                            <table class="baseline-table">
                                                <thead>
                                                    <tr>
                                                        <th class="sticky main-row"></th>
                                                        <th class="main-row" *ngFor="let parameter of this.indicatorsSelected[i].parameters_schema">{{parameter.name}}</th>
                                                    </tr>
                                                </thead>
                                                <tbody formArrayName="goal" *ngFor="let parameterGroup of indicadorGroup.get('goal').controls; let j = index">
                                                    <tr [formGroupName]="j" class="goal_row">
                                                        <td class="sticky main-col">{{parameterGroup.get('yearNumber').value}}<br/><small>{{parameterGroup.get('year').value | date : 'MMMM - yyyy'}}</small></td>
                                                        <td formArrayName="parameters" class="table-box main-col" *ngFor="let parameter of parameterGroup.get('parameters').controls; let k = index">
                                                            <div [formGroupName]="k">
                                                                <div formGroupName="goals" class="flex ml-2 mr-2" *ngIf="indicadorGroup.get('antiquity_diff').value">
                                                                    <input type="text" class="full-width font-weight-lighter" formControlName="newer" placeholder="Nueva">
                                                                    <input type="text" class="full-width font-weight-lighter" formControlName="older" placeholder="Antigua">
                                                                </div>
                                                                <div formGroupName="goals" *ngIf="!indicadorGroup.get('antiquity_diff').value && this.indicatorsSelected[i].parameters_schema[k].unit != 'Cualitativo'">
                                                                    <input type="text" class="full-width font-weight-lighter" formControlName="goal" placeholder="Meta">
                                                                </div>
                                                                <div formGroupName="goals" *ngIf="this.indicatorsSelected[i].parameters_schema[k].unit == 'Cualitativo'">
                                                                    <mat-select class="full-width schema-input font-weight-lighter" formControlName="goal">
                                                                        <mat-option *ngFor="let level of this.indicatorsSelected[i].parameters_schema[k].cualitative_levels" [value]="level.name">{{level.name}}</mat-option>
                                                                    </mat-select>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </mat-tab>
                        </mat-tab-group>
                    </mat-card-content>
                </mat-card>
        
                <mat-card class="mt-4" *ngIf="this.SchemaFormGroup.get('organizations_diff').value.length">
                    <mat-card-title class="font-weight-lighter">Discriminación de Organizaciones</mat-card-title>
                    <mat-card-content>
                        <div class="pt-3 row">
                            <div class="flex flex-center full-width">
                                <table class="organizations_diff_table">
                                    <thead>
                                        <tr>
                                            <th>Organización</th>
                                            <th>Clasificación</th>
                                        </tr>
                                    </thead>
                                    <tbody formArrayName="organizations_diff" *ngFor="let organizationGroup of this.SchemaFormGroup.get('organizations_diff')['controls']; let i = index">
                                        <tr [formGroupName]="i">
                                            <td>{{organizationGroup.get('organization').value}}</td>
                                            <td>
                                                <mat-select formControlName="isOlder" class="full-width schema-input">
                                                    <mat-option value="newer">Nueva</mat-option>
                                                    <mat-option value="older">Antigua</mat-option>
                                                </mat-select>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </mat-card-content>
                </mat-card>

                <div class="full-width flex mt-4">
                    <span class="fill-remaining-space"></span>
                    <button mat-button (click)="cancel()" class="mr-2">CANCELAR</button>
                    <button mat-raised-button color="primary" [disabled]="this.SchemaFormGroup.pristine || this.SchemaFormGroup.invalid" (click)="updateSchema()">GUARDAR</button>
                </div>
    
            </form>

            <ng-template #SchemaView>
                <div class="p-4">

                    <mat-card class="mt-4">
                        <mat-card-title class="font-weight-lighter">Línea Base y Metas</mat-card-title>
                        <mat-card-content>
                            <div *ngIf="!this.Project.full_schema.length" class="col-sm-12 mt-3 mb-3 font-weight-lighter text-center">No ha seleccionado ningún Indicador...</div>
                            <mat-tab-group *ngIf="this.Project.full_schema.length">
                                <mat-tab [label]="indicadorGroup.indicator" *ngFor="let indicadorGroup of this.Project.full_schema; let i = index">
                                    <div class="tab-content">
                                        <div class="row pb-3" *ngIf="indicadorGroup.baseline.length"> <!--Diferenciación en la Línea Base por grupo de organizaciones-->
                                            <div class="col-sm-6">
                                                <small class="full-width label">Línea base ingresada de forma:</small>
                                                <div>{{indicadorGroup.baseline_diff.type | forProjects : 'baseline-diff-type'}}</div>
                                            </div>
                                            <div class="col-sm-6" *ngIf="indicadorGroup.baseline_diff.type != 'individual'">
                                                <small class="full-width label">Agrupado por:</small>
                                                <div>{{indicadorGroup.baseline_diff.by | forProjects : 'baseline-diff-by'}}</div>
                                            </div>
                                        </div>
                                        <mat-divider *ngIf="indicadorGroup.baseline.length"></mat-divider>
                                        <div class="pt-3 pb-3" *ngIf="indicadorGroup.baseline.length">
                                            <h5 class="font-weight-lighter">Línea Base</h5>
                                            <div class="table-container">
                                                <table class="baseline-table">
                                                    <thead>
                                                        <tr>
                                                            <th class="sticky main-row"></th>
                                                            <th class="main-row" *ngFor="let parameter of this.indicatorsSelected[i].parameters_schema">{{parameter.name}}</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody *ngFor="let organizationGroup of indicadorGroup.baseline; let j = index">
                                                        <tr>
                                                            <td class="sticky main-col">{{organizationGroup.organization}}</td>
                                                            <td class="table-box main-col" *ngFor="let parameter of organizationGroup.parameters; let k = index">
                                                                <div class="full-width full-height font-weight-lighter schema-input">{{parameter.baseline | forProjects : 'baseline-value'}}</div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <mat-divider></mat-divider>
                                        <div class="pt-3">
                                            <h5 class="font-weight-lighter">Metas</h5>
                                            <div class="table-container">
                                                <table class="baseline-table">
                                                    <thead>
                                                        <tr>
                                                            <th class="sticky main-row"></th>
                                                            <th class="main-row" *ngFor="let parameter of this.indicatorsSelected[i].parameters_schema">{{parameter.name}}</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody *ngFor="let parameterGroup of indicadorGroup.goal; let j = index">
                                                        <tr class="goal_row">
                                                            <td class="sticky main-col">{{parameterGroup.yearNumber}}<br/><small>{{parameterGroup.year | date : 'MMMM - yyyy'}}</small></td>
                                                            <td class="table-box main-col" *ngFor="let parameter of parameterGroup.parameters; let k = index">
                                                                <div>
                                                                    <div class="flex ml-2 mr-2" *ngIf="indicadorGroup.antiquity_diff">
                                                                        <div class="full-width schema-input font-weight-lighter">{{parameter.goals.newer}}</div>
                                                                        <div class="full-width schema-input font-weight-lighter">{{parameter.goals.older}}</div>
                                                                    </div>
                                                                    <div *ngIf="!indicadorGroup.antiquity_diff && this.indicatorsSelected[i].parameters_schema[k].unit != 'Cualitativo'">
                                                                        <div class="full-width schema-input font-weight-lighter">{{parameter.goals.goal}}</div>
                                                                    </div>
                                                                    <div *ngIf="this.indicatorsSelected[i].parameters_schema[k].unit == 'Cualitativo'">
                                                                        <div class="full-width schema-input font-weight-lighter">{{parameter.goals.goal}}</div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </mat-tab>
                            </mat-tab-group>
                        </mat-card-content>
                    </mat-card>
            
                    <mat-card class="mt-4" *ngIf="this.Project.organizations_diff.length">
                        <mat-card-title class="font-weight-lighter">Discriminación de Organizaciones</mat-card-title>
                        <mat-card-content>
                            <div class="pt-3 row">
                                <div class="flex flex-center full-width">
                                    <table class="organizations_diff_table">
                                        <thead>
                                            <tr>
                                                <th>Organización</th>
                                                <th>Clasificación</th>
                                            </tr>
                                        </thead>
                                        <tbody *ngFor="let organizationGroup of this.Project.organizations_diff; let i = index">
                                            <tr>
                                                <td>{{organizationGroup.organization}}</td>
                                                <td>
                                                    <div class="font-weight-lighter schema-input">{{organizationGroup.isOlder | forProjects : 'organizations-diff'}}</div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </mat-card-content>
                    </mat-card>

                    </div>

            </ng-template>

        </mat-tab>
    </mat-tab-group>
</div>